#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/wf/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_wf_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _wf_segment_7SegmentRomStart, _wf_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0A, _wdw_skybox_mio0SegmentRomStart, _wdw_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_MIO0(0x05, _group9_mio0SegmentRomStart, _group9_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group9_geoSegmentRomStart, _group9_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group13_mio0SegmentRomStart, _group13_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group13_geoSegmentRomStart, _group13_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_10), 
	JUMP_LINK(script_func_global_14), 
	LOAD_MODEL_FROM_GEO(0x35, breakwall_geo), 
	LOAD_MODEL_FROM_GEO(0x36, bombpirate_geo), 
	LOAD_MODEL_FROM_GEO(0x37, monster_geo), 
	LOAD_MODEL_FROM_GEO(0x38, pirateskeleton_geo), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, wf_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_WF, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0D, LEVEL_WF, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE_GROUNDS, 0x01, 0xe2, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf1, LEVEL_CASTLE_GROUNDS, 0x01, 0xd2, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, 1585, -733, -2141, 0, 0, 0, 0x000a0000, bhvAirborneWarp),
		OBJECT(MODEL_BOO, 3326, -681, 653, 0, 0, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -2174, 272, 1745, 0, 0, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -2804, -653, -1896, 0, 154, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -3101, 871, -3227, 0, -156, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -2724, 696, -5796, 0, -156, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -7070, 2130, -3406, 0, -156, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -8420, 2108, -4499, 0, -156, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -5897, 2108, -6494, 0, -156, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -11529, 848, -11250, 0, -156, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -10813, 1693, -5717, 0, -115, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -2072, -1204, 548, 0, 147, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_BOO, -1284, 2791, 223, 0, 136, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_NONE, 732, -1156, -198, 0, 90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -2088, -1229, 1406, 0, 90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 3265, -714, 2302, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 79, -686, 3548, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -9113, 604, -4510, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -5747, 2008, -4515, 0, 90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -13983, 94, -9643, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -7096, 2208, -7795, 0, 0, 0, 0x00110000, bhvBlueCoinSwitch),
		OBJECT(MODEL_BLUE_COIN, -7087, 2030, -7017, 0, 0, 0, 0x00110000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -7108, 2030, -6499, 0, 0, 0, 0x00110000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -7622, 2008, -6558, 0, 0, 0, 0x00110000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -8285, 2008, -6550, 0, 0, 0, 0x00110000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5860, 2008, -6542, 0, 0, 0, 0x00110000, bhvHiddenBlueCoin),
		OBJECT(MODEL_NONE, -2618, 3155, 5061, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -2553, 2030, -713, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -596, 702, -3116, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -173, 328, -5933, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -4092, 601, -5504, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -3089, 871, -3127, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -122, 1458, -5091, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -22, -1262, 750, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0x35, -3935, 927, 1747, 0, 0, 0, 0x00000000, bhvBreakableCannonWall),
		OBJECT(0, -3325, 595, 1746, 0, -90, 0, 0x00000000, bhvShipCannon),
		OBJECT(0x38, 72, -1249, 946, 0, -180, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(0x38, -2733, 172, 1717, 0, 90, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(0x38, 2254, -306, 4008, 0, -97, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(0x38, -2026, 2863, 8460, 0, 166, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(0x38, -10785, 1437, 813, 0, -171, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(0x38, -13212, 1437, -1133, 0, 161, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(0x38, -9481, 2008, -4501, 0, -180, 0, 0x00110000, bhvPirateSkeleton),
		OBJECT(MODEL_NONE, -9935, 1965, -4396, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 1498, -768, -2566, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -2467, 172, 1243, 0, 0, 0, 0x00110000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -1822, -908, 2726, 0, 90, 0, 0, bhvCoinFormation),
		OBJECT(MODEL_BOO, -1892, -1128, 1856, 0, -176, 0, 0x000a0000, bhvBoo),
		OBJECT(MODEL_NONE, -9142, 854, -4529, 0, 0, 0, 0x005b0000, bhvPoleGrabbing),
		OBJECT(MODEL_NONE, -4732, 854, -4584, 0, 0, 0, 0x005b0000, bhvPoleGrabbing),
		OBJECT(MODEL_RED_COIN, -13091, 838, -5780, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -14229, -263, -8704, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -14630, 475, -11068, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -12804, 1374, -10366, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -14591, 1580, -10764, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -10310, 2063, -3094, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -11478, 1099, -9439, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -11019, 748, -12610, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_STAR, -1495, 4300, 10091, 0, 0, 0, 0x00000000, bhvStar),
		OBJECT(MODEL_STAR, -1636, 2039, -5099, 0, 0, 0, 0x03000000, bhvStar),
		OBJECT(MODEL_STAR, -9101, 646, -2591, 0, 0, 0, 0x02000000, bhvStar),
		OBJECT(0, -9035, 1773, -596, 0, 0, 0, 0x00000000, bhvHiddenRedCoinStar),
		OBJECT(0, -4653, 902, 1747, 0, 0, 0, 0x100B0000, bhvWarp),
		OBJECT(0, -1097, -2531, 3959, 0, 0, 0, 0x100D0000, bhvWarp),
		OBJECT(MODEL_RED_FLAME, 1617, -378, 311, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, 991, -456, 308, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -1419, -419, 3545, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -1419, -419, 4347, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, 250, 3436, 5016, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -321, 3436, 10300, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -885, 3436, 10300, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, 2670, 2665, -2402, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, 1638, 2665, -2402, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -658, 2665, -2402, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -2207, 2665, -2402, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -11, 1675, -3883, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -1975, 850, -2825, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -1340, 2222, -6167, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -4264, 849, -4324, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -10607, 2009, 2008, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -11171, 2009, 2008, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13709, 2009, -3276, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -12579, 1022, -4957, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -11201, 1022, -4957, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -11069, 1031, -7263, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -12117, 1031, -7263, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13161, 1031, -7263, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13401, 1057, -8852, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13401, 2063, -8852, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13401, 2063, -10345, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13401, 1057, -10345, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13401, 2063, -11820, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13401, 1057, -11820, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -13443, 2063, -13396, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_RED_FLAME, -10585, 2063, -13396, 0, 0, 0, 0x100B0000, bhvFlame),
		OBJECT(MODEL_BLACK_BOBOMB, 773, -306, 3326, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, -8995, 446, -6325, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, -10756, 1381, -9201, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, -1337, 2863, 5413, 0, 0, 0, 0, bhvBobomb),
		TERRAIN(wf_area_1_collision),
		MACRO_OBJECTS(wf_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_SHIP),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(2, wf_area_2),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE_GROUNDS, 0x01, 0xe2, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf1, LEVEL_CASTLE_GROUNDS, 0x01, 0xd2, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, -1018, -569, 425, 0, 1, 0, 0x000A0000, bhvFlyingWarp),
		OBJECT(0x36, -7506, -1588, 10369, 0, 40, 0, 0x01000000, bhvKingPirate),
		OBJECT(0, -7419, -2597, 11523, 0, 44, 0, 0x00010000, bhvPirateCannon),
		OBJECT(0, -6364, -2597, 10638, 0, 42, 0, 0x00020000, bhvPirateCannon),
		TERRAIN(wf_area_2_collision),
		MACRO_OBJECTS(wf_area_2_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 0),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(3, wf_area_3),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE_GROUNDS, 0x01, 0xe2, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf1, LEVEL_CASTLE_GROUNDS, 0x01, 0xd2, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_WOODEN_SIGNPOST, 9826, -2557, 3245, 0, 90, 0, 0x008A0000, bhvMessagePanel),
		OBJECT(MODEL_TREASURE_CHEST_BASE, -68, -2543, -1441, 0, 90, 0, 0x00000000, bhvBetaChestBottom),
		OBJECT(MODEL_TREASURE_CHEST_BASE, -805, -2610, 4964, 0, 90, 0, 0x00000000, bhvBetaChestBottom),
		OBJECT(MODEL_TREASURE_CHEST_BASE, -8680, -2629, 2467, 0, 90, 0, 0x00000000, bhvBetaChestBottom),
		OBJECT(MODEL_TREASURE_CHEST_BASE, -5912, -5419, 2353, 0, 90, 0, 0x00000000, bhvBetaChestBottom),
		OBJECT(0, 12470, -1792, 2619, 0, -90, 0, 0x000A0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_TREASURE_CHEST_BASE, 10979, -2509, 1945, 0, 73, 0, 0x00000000, bhvBetaChestBottom),
		OBJECT(0x37, 5252, -10014, 1886, 0, 73, 0, 0x00000000, bhvEvilShark),
		OBJECT(0x37, -4525, -8711, 2716, 0, 73, 0, 0x00000000, bhvEvilShark),
		TERRAIN(wf_area_3_collision),
		MACRO_OBJECTS(wf_area_3_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_UNDERGROUND),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
