#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/castle_grounds/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_castle_grounds_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _castle_grounds_segment_7SegmentRomStart, _castle_grounds_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0A, _water_skybox_mio0SegmentRomStart, _water_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _outside_mio0SegmentRomStart, _outside_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group10_mio0SegmentRomStart, _group10_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group10_geoSegmentRomStart, _group10_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group15_mio0SegmentRomStart, _group15_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group15_geoSegmentRomStart, _group15_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_11), 
	JUMP_LINK(script_func_global_16), 
	LOAD_MODEL_FROM_GEO(0x35, panther_geo), 
	LOAD_MODEL_FROM_GEO(0x36, dolphin_geo), 
	LOAD_MODEL_FROM_GEO(0x37, raft_geo), 
	LOAD_MODEL_FROM_GEO(0x38, jetski_geo), 
	LOAD_MODEL_FROM_GEO(0x39, pirateship_geo), 
	LOAD_MODEL_FROM_GEO(0x3a, pirate_geo), 
	LOAD_MODEL_FROM_GEO(0x3b, cross_geo), 
	LOAD_MODEL_FROM_GEO(0x16, warp_pipe_geo), 
	LOAD_MODEL_FROM_GEO(0x3C, flower_geo), 
	LOAD_MODEL_FROM_GEO(0x3D, toadlawyer_geo), 
	LOAD_MODEL_FROM_GEO(0x3F, treasuredoor_geo), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, castle_grounds_area_1),
		WARP_NODE(0x11, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x12, LEVEL_WF, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x13, LEVEL_JRB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x14, LEVEL_CCM, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd1, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xe1, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd2, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xe2, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd3, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xe3, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd4, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xe4, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x15, LEVEL_BBH, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd5, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xe5, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x16, LEVEL_HMC, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd6, LEVEL_BOB, 0xe6, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x17, LEVEL_LLL, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xD7, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xE7, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x18, LEVEL_SSL, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xd8, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xe8, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x19, LEVEL_DDD, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xD9, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xE9, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x1A, LEVEL_SL, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xDA, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xEA, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x1B, LEVEL_WDW, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xEB, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xDB, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC0, LEVEL_BITDW, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC1, LEVEL_BITDW, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC2, LEVEL_BITDW, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC3, LEVEL_BITDW, 0x04, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC4, LEVEL_BITDW, 0x05, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC5, LEVEL_BITDW, 0x06, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC6, LEVEL_BITFS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC7, LEVEL_BITFS, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC8, LEVEL_BITFS, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xC9, LEVEL_BITFS, 0x04, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xCA, LEVEL_BITFS, 0x05, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xCB, LEVEL_BITFS, 0x06, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xA0, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xA1, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xCF, LEVEL_BITS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x1F, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf1, LEVEL_CASTLE_GROUNDS, 0x01, 0xf1, WARP_NO_CHECKPOINT),
		WARP_NODE(0xE6, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_DL_CANNON_LID, -1828, -224, 1985, 0, 0, 0, 0x00010000, bhvCannonClosed),
		OBJECT(MODEL_YELLOW_COIN, -189, -923, 5528, 0, -93, 0, 0x00000000, bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -205, -923, 6406, 0, -93, 0, 0x00000000, bhvOneCoin),
		OBJECT(MODEL_YELLOW_COIN, -212, -923, 4649, 0, -93, 0, 0x00000000, bhvOneCoin),
		OBJECT(0, -931, -319, 976, 0, 177, 0, 0x00D10000, bhvAirborneDeathWarp),
		OBJECT(0, -33, -319, 1019, 0, 177, 0, 0x00D20000, bhvAirborneDeathWarp),
		OBJECT(0, 889, -319, 1062, 0, 177, 0, 0x00D30000, bhvAirborneDeathWarp),
		OBJECT(0, 1830, -63, 1106, 0, 177, 0, 0x00D40000, bhvAirborneDeathWarp),
		OBJECT(0, -963, -322, 2048, 0, 177, 0, 0x00D50000, bhvAirborneDeathWarp),
		OBJECT(0, 845, -454, 2203, 0, 177, 0, 0x00D70000, bhvAirborneDeathWarp),
		OBJECT(0, -70, -392, 2170, 0, 177, 0, 0x00D60000, bhvAirborneDeathWarp),
		OBJECT(0, 1845, -454, 2254, 0, 177, 0, 0x00D80000, bhvAirborneDeathWarp),
		OBJECT(0, 1071, 220, -1795, 0, 177, 0, 0x00DB0000, bhvAirborneDeathWarp),
		OBJECT(MODEL_WOODEN_SIGNPOST, -62, -412, -734, 0, 0, 0, 0x00170000, bhvMessagePanel),
		OBJECT(0x3D, 707, -488, -375, 0, -20, 0, 0x00170000, bhvToadLawyer),
		OBJECT(0, -33, -10, -60, 0, -3, 0, (0x1F << 16), bhvSpinAirborneWarp),
		OBJECT(0, -155, -319, 250, 0, 177, 0, (0xF1 << 16), bhvAirborneDeathWarp),
		OBJECT(0x36, 2197, -932, 2430, 0, -117, 0, 0x00010000, bhvDolphin),
		OBJECT(0x36, -6210, -1486, 7078, 0, -180, 0, 0x00010000, bhvDolphinSwimming),
		OBJECT(0x36, -7869, -1486, -798, 0, -180, 0, 0x00010000, bhvDolphinSwimming),
		OBJECT(0x36, 5873, -1486, -5416, 0, -180, 0, 0x00010000, bhvDolphinSwimming),
		OBJECT(0x36, 8590, -1486, 5024, 0, -180, 0, 0x00010000, bhvDolphinSwimming),
		OBJECT(0x35, -1618, -365, -14, 0, 42, 0, 0x00000000, bhvPanther),
		OBJECT(0x16, -1002, -644, 1678, 0, -93, 0, 0x00110000, bhvWarpPipe),
		OBJECT(0x16, -114, -651, 1673, 0, -93, 0, 0x00120001, bhvWarpPipe),
		OBJECT(0x16, 834, -680, 1686, 0, -93, 0, 0x00130003, bhvWarpPipe),
		OBJECT(0x16, 1829, -770, 1742, 0, -93, 0, 0x00140006, bhvWarpPipe),
		OBJECT(0x16, -1044, -654, 2702, 0, -93, 0, 0x0015000A, bhvWarpPipe),
		OBJECT(0x16, 763, -786, 2858, 0, -93, 0, 0x00170014, bhvWarpPipe),
		OBJECT(0x16, -151, -724, 2824, 0, -93, 0, 0x0016000F, bhvWarpPipe),
		OBJECT(0x16, 1763, -946, 2908, 0, -93, 0, 0x00180019, bhvWarpPipe),
		OBJECT(0x16, 279, -807, 3295, 0, -93, 0, 0x001A0023, bhvWarpPipe),
		OBJECT(0x16, -655, -788, 3295, 0, -93, 0, 0x0019001E, bhvWarpPipe),
		OBJECT(0x3C, 1070, -487, -1159, 0, 0, 0, 0x001B0000, bhvBooCage),
		OBJECT(0x3F, 136, -3730, 1969, 0, 0, 0, 0x001A0023, bhvTreasureDoor),
		OBJECT(MODEL_STAR, -72, 2005, -1562, 0, 42, 0, 0x04010000, bhvStar),
		OBJECT(MODEL_STAR, -67, -1873, -1709, 0, 42, 0, 0x00010000, bhvStar),
		OBJECT(MODEL_STAR, 159, -3940, 1369, 0, 42, 0, 0x05010000, bhvStar),
		OBJECT(0, -931, -319, 976, 0, 177, 0, 0x00E10000, bhvAirborneStarCollectWarp),
		OBJECT(0, -61, -319, 1017, 0, 177, 0, 0x00E20000, bhvAirborneStarCollectWarp),
		OBJECT(0, 899, -319, 1062, 0, 177, 0, 0x00E30000, bhvAirborneStarCollectWarp),
		OBJECT(0, 1789, -319, 1104, 0, 177, 0, 0x00E40000, bhvAirborneStarCollectWarp),
		OBJECT(0, -991, -322, 2047, 0, 177, 0, 0x00E50000, bhvAirborneStarCollectWarp),
		OBJECT(0, 816, -454, 2202, 0, 177, 0, 0x00E70000, bhvAirborneStarCollectWarp),
		OBJECT(0, -98, -392, 2168, 0, 177, 0, 0x00E60000, bhvAirborneStarCollectWarp),
		OBJECT(0, 1816, -454, 2253, 0, 177, 0, 0x00E80000, bhvAirborneStarCollectWarp),
		OBJECT(0, -602, -456, 2640, 0, 177, 0, (0xE9 << 16), bhvAirborneStarCollectWarp),
		OBJECT(0, -561, -456, 2640, 0, 177, 0, (0xD9 << 16), bhvAirborneDeathWarp),
		OBJECT(0, 332, -475, 2640, 0, 177, 0, 0x00EA0000, bhvAirborneStarCollectWarp),
		OBJECT(0, 373, -475, 2640, 0, 177, 0, 0x00DA0000, bhvAirborneDeathWarp),
		OBJECT(0, 1030, -36, -1797, 0, 177, 0, 0x00EB0000, bhvAirborneStarCollectWarp),
		OBJECT(0, -239, -523, 5994, 0, 177, 0, 0x00A00000, bhvAirborneStarCollectWarp),
		OBJECT(0, -198, -523, 5994, 0, 177, 0, 0x00A10000, bhvAirborneDeathWarp),
		OBJECT(0x37, 6373, -1003, 6239, 0, -93, 0, 0x00010000, bhvRaft),
		OBJECT(MODEL_BOBOMB_BUDDY, -193, -923, 7346, 0, -180, 0, 0x00010000, bhvTutorialGuy),
		OBJECT(0x39, -8813, -1003, 2993, 0, 95, 0, 0x00010000, bhvPirateship),
		TERRAIN(castle_grounds_area_1_collision),
		MACRO_OBJECTS(castle_grounds_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_INSIDE_CASTLE),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
