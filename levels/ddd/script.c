#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/ddd/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_ddd_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _ddd_segment_7SegmentRomStart, _ddd_segment_7SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _water_mio0SegmentRomStart, _water_mio0SegmentRomEnd), 
	LOAD_MIO0(0x0B, _effect_mio0SegmentRomStart, _effect_mio0SegmentRomEnd), 
	LOAD_MIO0(0x0A, _clouds_skybox_mio0SegmentRomStart, _clouds_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group4_mio0SegmentRomStart, _group4_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group4_geoSegmentRomStart, _group4_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group13_mio0SegmentRomStart, _group13_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group13_geoSegmentRomStart, _group13_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_5), 
	JUMP_LINK(script_func_global_14), 
	LOAD_MODEL_FROM_GEO(0x35, wobble_geo), 
	LOAD_MODEL_FROM_GEO(0x36, luigichariot_geo), 
	LOAD_MODEL_FROM_GEO(0x37, yoshiwings_geo), 
	LOAD_MODEL_FROM_GEO(0x38, goldseesaw_geo), 
	LOAD_MODEL_FROM_GEO(0x39, zeus_geo), 
	LOAD_MODEL_FROM_GEO(0x3A, lightning_geo), 
	LOAD_MODEL_FROM_GEO(0x3B, medusa_geo), 
	LOAD_MODEL_FROM_GEO(0x3C, olympship_geo), 
	LOAD_MODEL_FROM_GEO(0x3D, medusagate_geo), 
	LOAD_MODEL_FROM_GEO(0x3E, wariobacchus_geo), 
	LOAD_MODEL_FROM_GEO(0x3F, thot1_geo), 
	LOAD_MODEL_FROM_GEO(0x40, thot2_geo), 
	LOAD_MODEL_FROM_GEO(0x41, thot3_geo), 
	LOAD_MODEL_FROM_GEO(0x42, lightningball_geo), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, ddd_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_DDD, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0D, LEVEL_BOB, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE_GROUNDS, 0x01, 0xE9, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CASTLE_GROUNDS, 0x01, 0xD9, WARP_NO_CHECKPOINT),
		WARP_NODE(0x1B, LEVEL_DDD, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, -7822, -1321, -688, 0, 90, 0, 0x000a0000, bhvAirborneWarp),
		OBJECT(MODEL_NONE, -1963, 379, 3373, 0, -46, 0, 0x000C0000, bhvAirborneWarp),
		OBJECT(0x3D, -1513, 379, 2873, 0, -46, 0, 0x000C0000, bhvMedusaGate),
		OBJECT(0x35, -2777, -45, 3973, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0x35, -212, 455, 13103, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT_WITH_ACTS(0x39, 52, 5144, 1365, 0, 176, 0, 0x00000000, bhvZeus, ACT_1),
		OBJECT(0, 52, 5962, 1365, 0, 176, 0, 0x00000000, bhvHatControl),
		OBJECT(0, -1047, 379, 2416, 0, 176, 0, 0x400B0000, bhvWarp),
		OBJECT(0x35, 4250, 2343, -3768, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0x35, -4946, 743, -19037, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0x36, -1580, 474, -7355, 0, 170, 0, 0x00000000, bhvLuigiChariot),
		OBJECT(0x38, -1939, 1093, -5592, 0, 0, 0, 0x00000000, bhvSeesawPlatform),
		OBJECT(0x35, -4474, 1993, -16395, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(MODEL_DL_CANNON_LID, -4735, -562, -2518, 0, 90, 0, 0x00000000, bhvCannonClosed),
		OBJECT(0x35, 209, 1243, -3916, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0, 5723, 1656, -1815, 0, 90, 0, 0x05000000, bhvHiddenRedCoinStar),
		OBJECT(MODEL_RED_COIN, 6408, 2342, -3466, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 6276, 2155, -5073, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 7280, 2673, -344, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5339, 2672, 2442, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5346, 1747, 2447, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(0x35, 4770, 2093, 1515, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0x35, 6522, 1493, 1061, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0x38, 5339, 1647, 1904, 0, 0, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(0x38, 8708, 1447, -4172, 0, 135, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(MODEL_RED_COIN, 6518, 1736, 1054, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 4719, 2132, -4753, 0, -135, 0, 0x04000000, bhvRedCoin),
		OBJECT(0x38, 5339, 2572, 1904, 0, 0, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(MODEL_RED_COIN, 9094, 1547, -4575, 0, 90, 0, 0x04000000, bhvRedCoin),
		OBJECT(0x38, -4527, 139, -18468, 0, 86, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(0x35, -1859, 343, -4857, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0x38, -4012, 439, -18910, 0, 176, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(0x35, 1056, 1243, -3036, 0, 90, 0, 0x00000000, bhvWobblerock),
		OBJECT(0, -4931, 1545, -17858, 0, 170, 0, 0x00010000, bhvRaceCheck),
		OBJECT(0, -1710, 542, -6933, 0, 170, 0, 0x10020000, bhvRaceCheck),
		OBJECT(MODEL_STAR, 5761, 2243, -14871, 0, 170, 0, 0x01000000, bhvStar),
		OBJECT(0x38, -4519, -220, 9095, 0, -5, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(MODEL_BOBOMB_BUDDY, 3603, 879, 12905, 0, 90, 0, 0x00000000, bhvBobombBuddyOpensCannon),
		OBJECT(MODEL_STAR, 6523, 3274, 12621, 0, 170, 0, 0x03000000, bhvStar),
		OBJECT(0x38, 7125, 2534, 9604, 0, 134, 0, 0x00010000, bhvSeesawPlatform),
		OBJECT(0, -1094, 1535, -3670, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, -6087, -1286, -590, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, -4255, -480, 5053, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, 6449, 1595, 11570, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, 5734, 1456, -1817, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, -246, 381, -2082, 0, 40, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -3220, -829, -1793, 0, 56, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 7749, 1501, 1119, 0, -50, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 1736, 2683, 1912, 0, -50, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 1679, 3183, 1358, 0, -50, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 5070, 1731, 264, 0, -50, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 1219, 1383, -914, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, -1026, -537, -1315, 0, -50, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -1436, 2978, 385, 0, -26, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -1647, 4676, 1377, 0, 90, 0, 0x00110000, bhvCoinFormation),
		OBJECT_WITH_ACTS(MODEL_BOBOMB_BUDDY, -6107, -1286, -596, 0, 90, 0, 0x00010000, bhvBobombBuddy, ACT_5),
		OBJECT_WITH_ACTS(0x3C, 698, 5477, 1562, 0, 176, 0, 0x001B0000, bhvOlympShip, ACT_5),
		OBJECT_WITH_ACTS(0x3C, 14478, 3014, -1128, 0, -154, 0, 0x01000000, bhvOlympShip, ACT_1 | ACT_2 | ACT_3 | ACT_4 | ACT_6),
		OBJECT(0x3E, 13238, 2126, 37, 0, -90, 0, 0x01000000, bhvBacchus),
		OBJECT(0x3F, 13021, 1923, 576, 0, -117, 0, 0x00000000, bhvThot),
		OBJECT(0x40, 13054, 1923, -451, 0, -46, 0, 0x00000000, bhvThot2),
		OBJECT(0x41, 12650, 1999, 189, 0, -83, 0, 0x00000000, bhvThot3),
		OBJECT(0, -2133, 536, -6256, 0, 90, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 2731, 1709, 2630, 0, 170, 0, 0x00020000, bhvCoinFormation),
		OBJECT(MODEL_BLUE_COIN_SWITCH, 1434, 4072, 247, 0, 170, 0, 0x00020000, bhvBlueCoinSwitch),
		OBJECT(MODEL_BLUE_COIN, 481, 4192, -454, 0, 170, 0, 0x00020000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -56, 4442, -463, 0, 170, 0, 0x00020000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -542, 4692, -228, 0, 170, 0, 0x00020000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -870, 4842, -7, 0, 170, 0, 0x00020000, bhvHiddenBlueCoin),
		OBJECT(0, 2860, 856, 13781, 0, -49, 0, 0x00000000, bhvCoinFormation),
		TERRAIN(ddd_area_1_collision),
		MACRO_OBJECTS(ddd_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_OLYMP),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(2, ddd_area_2),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_DDD, 0x01, 0x0C, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0D, LEVEL_BOB, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE_GROUNDS, 0x01, 0xE9, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CASTLE_GROUNDS, 0x01, 0xD9, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, -1500, 0, 0, 0, 90, 0, 0x000a0000, bhvAirborneWarp),
		OBJECT(MODEL_PURPLE_SWITCH, 2442, 0, 0, 0, 90, 0, 0x000a0000, bhvFloorSwitchHiddenObjects),
		OBJECT(MODEL_BREAKABLE_BOX, 4205, -542, -1250, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4205, -542, 1250, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4205, -342, -1250, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4205, -342, 1250, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4405, -542, -1050, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4405, -342, -1050, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4005, -542, -1450, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4005, -342, -1450, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4405, -542, 1050, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4405, -342, 1050, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4005, -542, 1450, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(MODEL_BREAKABLE_BOX, 4005, -342, 1450, 0, 135, 0, 0, bhvHiddenObject),
		OBJECT(0, 6938, -542, 1328, 0, 135, 0, 0x00040000, bhvFlamethrower),
		OBJECT(0, 6938, -542, -1328, 0, 135, 0, 0x00040000, bhvFlamethrower),
		OBJECT(MODEL_CHUCKYA, 5324, 0, -573, 0, -90, 0, 0x000a0000, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 5292, 0, 725, 0, -90, 0, 0x000a0000, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 7430, 0, 1987, 0, -90, 0, 0x000a0000, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 7534, 0, -1963, 0, -90, 0, 0x000a0000, bhvChuckya),
		OBJECT(0x3B, 7813, 0, 0, 0, -90, 0, 0x000a0000, bhvMedusa),
		OBJECT(MODEL_STAR, 9270, 300, 0, 0, -90, 0, 0x02000000, bhvStar),
		OBJECT(MODEL_BOWLING_BALL, 2203, 25, -1250, 0, -90, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 2203, 25, 1250, 0, -90, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 3386, 25, -1999, 0, -90, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 3386, 25, 1999, 0, -90, 0, 0x00000000, bhvFireSpitter),
		OBJECT(0, 2405, -1, -431, 0, 90, 0, 0x00100023, bhvHitBoxMedusa),
		OBJECT(0, 2725, 0, 672, 0, 90, 0, 0x00100023, bhvHitBoxMedusa),
		OBJECT(0, 3990, 0, -2454, 0, 90, 0, 0x00100023, bhvHitBoxMedusa),
		OBJECT(0, 4545, 0, -318, 0, 90, 0, 0x00100023, bhvHitBoxMedusa),
		OBJECT(0, 6094, 0, 1016, 0, 90, 0, 0x00100023, bhvHitBoxMedusa),
		OBJECT(0, 6679, 0, -296, 0, 90, 0, 0x00100023, bhvHitBoxMedusa),
		OBJECT(0, 2836, 0, -1064, 0, 90, 0, 0x00200032, bhvHitBoxMedusa),
		OBJECT(0, 4114, 0, 2104, 0, 90, 0, 0x00300040, bhvHitBoxMedusa),
		OBJECT(0, 5255, 0, -1141, 0, 90, 0, 0x00500022, bhvHitBoxMedusa),
		OBJECT(0, -2479, 0, 0, 0, 176, 0, 0x400B0000, bhvWarp),
		OBJECT(0, -2479, 0, 344, 0, 176, 0, 0x400B0000, bhvWarp),
		OBJECT(0, -2479, 0, -344, 0, 176, 0, 0x400B0000, bhvWarp),
		TERRAIN(ddd_area_2_collision),
		MACRO_OBJECTS(ddd_area_2_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 0),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(3, ddd_area_3),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_DDD, 0x01, 0x0C, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0D, LEVEL_BOB, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE_GROUNDS, 0x01, 0xE9, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CASTLE_GROUNDS, 0x01, 0xD9, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, 72, 1206, 14537, 0, -180, 0, 0x000a0000, bhvAirborneWarp),
		OBJECT(0x39, 0, 1084, 5607, 0, 0, 0, 0x04000000, bhvZeusBoss),
		OBJECT(0x3C, 0, 0, 13796, 0, -180, 0, 0x00000001, bhvOlympShip),
		OBJECT(0x36, -16062, -96, 21036, 0, 0, 0, 0x00000001, bhvLuigiChariot),
		TERRAIN(ddd_area_3_collision),
		MACRO_OBJECTS(ddd_area_3_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 0),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
